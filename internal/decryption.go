package internal

import "strings"

func Decryption(s string) string {
	sl := strings.Split(s, "")
	length := len(sl)
	var text string
	var falseID int
	var key int

	itos := map[int]string{
		1:  "a",
		2:  "b",
		3:  "c",
		4:  "d",
		5:  "e",
		6:  "f",
		7:  "g",
		8:  "h",
		9:  "i",
		10: "j",
		11: "k",
		12: "l",
		13: "m",
		14: "n",
		15: "o",
		16: "p",
		17: "q",
		18: "r",
		19: "s",
		20: "t",
		21: "u",
		22: "v",
		23: "w",
		24: "x",
		25: "y",
		26: "z",
		27: "1",
		28: "2",
		29: "3",
		30: "4",
		31: "5",
		32: "6",
		33: "7",
		34: "8",
		35: "9",
		36: "0",
		37: "@",
		38: "K",
		39: "#",
		40: "%",
		41: "&",
		42: "[",
		43: "]",
		44: "(",
		45: ")",
		46: "?",
		47: "!",
		48: "-",
		49: "+",
		50: "=",
		51: "~",
		52: ",",
		53: ".",
		54: " ",
	}
	stoi := map[string]int{
		"å": 0,
		"∫": 1,
		"ç": 2,
		"∂": 3,
		"´": 4,
		"ƒ": 5,
		"©": 6,
		"˙": 7,
		"ˆ": 8,
		"∆": 9,
		"˚": 10,
		"¬": 11,
		"µ": 12,
		"Ø": 13,
		"ø": 14,
		"π": 15,
		"œ": 16,
		"®": 17,
		"ß": 18,
		"†": 19,
		"¨": 20,
		"√": 21,
		"∑": 22,
		"≈": 23,
		`\`: 24,
		"Ω": 25,
		"¡": 26,
		"™": 27,
		"£": 28,
		"¢": 29,
		"∞": 30,
		"§": 31,
		"¶": 32,
		"•": 33,
		"ª": 34,
		"º": 35,
		"€": 36,
		"": 37,
		"‹": 38,
		"ﬁ": 39,
		"‡": 40,
		"”": 41,
		"’": 42,
		"·": 43,
		"‚": 44,
		"¿": 45,
		"⁄": 46,
		"—": 47,
		"±": 48,
		"≠": 49,
		"`": 50,
		"≤": 51,
		"≥": 52,
		"◊": 53,
	}

	for i := 0; i < length; i++ {
		if i == 0 {
			key = stoi[sl[0]]
		} else {
			falseID = stoi[sl[i]]
			idNumber := falseID + 54 - key
			idNumber %= 54

			sl[i] = itos[idNumber]
			text += sl[i]
		}
	}
	return text
}
